Karakteristike indeksnih datoteka - postojanje indeksa
Indeks je pomoćna struktura podataka, realizovana u posebnoj datoteci, kao stablo pretrage
Sadrži parove (vrednost ključa, relativna adresa sloga/bloka)
Služi za preslikavanje argumenata traženja u adresu sloga koja se nalazi u posebnoj datoteci - zoni podataka (primarna zona)

Vrste indeksnih datoteka - statičke i dinamičke
Indeksne datoteke su kompromis između sekvencijalne i rasute datoteke

~

Statička IS datoteka ima tri memorijske zone:
 - primarna zona (zona podataka) - sekvencijalna organizacija
 - zona indeksa - spregnuta organizacija (n-arno stablo)
 - zona prekoračenja - spregnuza organizacija (nizovi)

Primarna zona:
 - slogovi uređeni saglasno rastućim vrednostima ključa
 - slogovi grupisani u blokove (poželjan što veći faktor blokiranja)
 - kreira se u postupku formiranja statičke IS datoteke
Ciljevi:
 - iskoristiti poželjne osobine sekvencijalne organizacije u redoslednoj obradi podataka
 - izbeći efekat loših performansi ažuriranja sekvencijalno organizovne datoteke

Zona indeksa:
 - puno stablo traženja, reda n, visine h
 - čvor stabla = blok, sadrži od 1 do n elemenata (n - faktor blokiranja u zoni indeksa)
 - u čvoru stabla se nalaze parovi (ključ sloga S, adresa bloka primarne zone u kom je slog S ili podstabla koji takođe ovaj ključ)
 - elementi u čvoru su uređeni saglasno rastućim vrednostima ključa (sekvencijalno organizovana struktura)
 - reprezentativne vrednosti ključa svakog bloka primarne zone su propagirane u stablo
 - elementi listova stabla sadrže po jednu vrednost ključa iz svakog bloka
 - elementi čvorova na višim nivoima sadrže po jednu vrednost ključa iz svakog direktno podređenog čvora 
 - nakon kreiranja, zona indeksa se ne ažurira (statička datoteka lmao)
Vrste zone indeksa:
 - zona indeska sa propagacijom najvećih vrednosti ključa iz svakog bloka (u slučaju poslednjeg bloka se propagira najveća DOZVOLJENA vrednost ključa)
 - zona indeksa sa propagacijom najmanjih vrednosti ključa iz svakog bloka (u slučaju prvog bloka propagira se najmanja DOZVOLJENA vrednost ključa)
 - zona indeksa == stablo traženja

Zona prekoračenja:
 - sadrži kompletne slogove datoteke (kao i primarna zona) koji se upisuju u zonu prekoračenja pri upisu novih slogova
 - kada blok u primarnoj zoni nije kompletan, upis novog sloga dovodi samo do pomeranja slogova u bloku (u primarnoj zoni)
 - kada je blok u primarnoj zoni kompletak, upis svakog novog sloga dovodi do upisa jednog od slogova koji pripadaju bloku u zonu prekoračenja 
   prvo se smesti novi blok tamo gde treba (po vrednosti ključa), i onda se blok sa trenutnom maksimalnom vrednosti ključa upisuje u zonu prekoračenja
 - sprežu se logički neposredno susedni prekoračioci jednog bloka, faktor blokiranja f=1
 - slogovi u svakom lancu prekoračilaca uređeni su u rastućem redosledu
 - pokazivač na početak lana može biti direktno povezan sa listom stabla traženja (u odgovarajućem listu zone indeksa) ili indirektno povezan sa listom stabla traženja (u pratećem delu odgovarajućeg bloka u primarnoj zoni)

~

Indeks-sekvencijalna metoda pristupa je njčešće podržana u sistemima za upravljanje datoteka ili u savremenim SUBP
Obezbeđuje formiranje, traženje, ažuriranje i reorganizaciju, kao i sekvencijalni, direktni i dinamički način pristupa IS datoteci

Formiranje IS datoteke:
 - program redosledno učitava slogove ulazne sekvencijalne datoteke
 – smešta blokove u primarnu zonu IS datoteke
 - formiranje zone indeksa (iterativno, po nivoima stabla traženja, propagacija najvećih vrednosti)
 - formiranje zone prekoračenja (alocira se prazna zona prekoračenja, svi blokovi sprežu se u lanac slobodnih blokova, početak lanca upisuje se u zaglavlje zone prekoračenja)

Traženje logički narednog sloga vrši se kombinovanom primenom metode linearnog traženja (u primarnoj zoni) i metode traženja praćenjem pokazivača (u lanci prekoračilaca)

Traženje slučajno odabranog sloga se vrši  praćenjem pokazivača u stablu pristupa
Započinje u korenu i stiže do lista u stablu traženja
Prati se pokazivač odgovarajućeg elementa u listu i prelazi se u blok podataka u primarnoj zoni
Po potrebi, nastavlja se traženje praćenjem lanca prekoračilaca

Za IS datoteke je moguća efikasna obrada u režimu redosledne i direktne obrade
U oba režima je pogodna za korišćenje u ulozi vodeće datoteke
Redosledna obrada putem vodeće datoteke odvija se naizmeničnim pristupanjem blokovima primarne zone i njihovim lancima prekoračilaca
Direktna obrada - isto ???

Ažuriranje IS datoteke vrši se u režimu direktne obrade
Upis novog sloga:
 - nakon neuspešnog traženja
 - ako se neuspešno traženje zaustavilo u bloku primarne zone, novi slog se upisuje u primarnu zonu, a slog sa najvećim ključem prelazi u zonu prekoračilaca
 - ako se neuspešno traženje zaustavilo na nekom od prekoračilaca, novi slog se upisuje u prvu slobodnu lokaciju i uvezuje se sa ostalim prekoračiocima
Brisanje sloga:
 - logičko ne zateva ništa,
 - fizičko zahteva pomeranje slogova i ažuriranje lanaca prekoračilaca (zahteva velik broj pristupa datoteci)
Modifikacija sadržaja postojećeg sloga:
 - nakon uspešnog traženja
 - potreban samo jedan pristup da bi se modifikovani slog upisao u datoteku

Reorganizacija IS datoteke:
 - značajna degradacija performansi traženja slogova i obrade datoteke u vremenu usled upisa slogova u zonu prekoračenja i logičkog brisanja slogova
 - potreba je periodična Reorganizacija datoteke
 - postupak: ponovno formiranje primarne zone, generisanje novog stabla traženja i formiranje nove, prazne zone prekoračenja
 - interval vremena između dve reorganizacije može biti fiksan ili idnamički određen
 - distribuirani slobodan prostor ublažava problem degradacije performansi obrade zbog upisa novih slogova

Prednosti IS datoteka:
 - kada iste podatke treba obrađivati i u režimu redosledne i u režimu direktne obrade
 - intezivno se koristi u paketnoj obradi
 - može se koristiti i u interaktivnoj obradi
Nedostaci:
 - upis slogova u zonu prekoračenja dovodi do degradacije performansi obrade

Oblasti primene:
 - FSP zasnovane na statičkoj IS organizaciji se koriste u mrežnim sistemima baza podataka
 - istorijski značaj (preteča dinamičkim IS datotekama)
